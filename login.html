<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="style.css">
        <title>
            Epidora
        </title>
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    </head>
    <body class="b">
        <div class="container">
            <div class="formsec">
                <h1>Epidora</h1> 
                <h2>A gift to the skin</h2>
                <p class="tagline">Welcome Back</p>
                <form id="loginForm">
                <label for="email">Email address</label>
                <input type="email" id="email" placeholder="Enter your email">

                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password">

                <button type="submit">Log in</button>
                </form>
                <div class="divider">Or</div> 
                <div class="social">
                    <button class="btn"><img src="./images/google.svg" alt="Google logo" class="logo">Sign in with Google</button>
                    <button class="btn"><img src="./images/apple.svg" alt="Apple logo" class="logo">Sign in with Apple</button>
                </div>
                <p class="login-link">Dont have an account? &nbsp; <a href="index.html">Sign Up</a></p>
                
            </div>
            <div class="imagesec">
            <img src="./images/jelly.jpeg" alt="Jellyfish">
            </div>
        </div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabaseclient.js"></script>
  <script>
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      try {
        const { data, error } = await supabaseClient.auth.signInWithPassword({
          email: email,
          password: password
        });

        if (error) {
          console.error("Login error:", error);
          alert("Login failed: " + error.message);
        } else {
          console.log("Login success:", data);
          alert("Login successful!");
          // Redirect to dashboard/homepage
          window.location.href = "dashboard.html";  
        }
      } catch (err) {
        console.error("Unexpected error:", err);
        alert("Something went wrong. Please try again.");
      }
    });
  </script>
    </body>
</html>

